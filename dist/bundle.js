!function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=e(mapboxgl);const n="pk.eyJ1IjoiZGJhcm5lc2VuIiwiYSI6IjFWeUJFNFUifQ.CF2Du3MPcaCQhBBNJSQMDQ",a="https://uploads-ssl.webflow.com/5a12777c9048ed000106553e/65f40a4f33d817767e6e242e_marker_blue.svg",l="https://uploads-ssl.webflow.com/5a12777c9048ed000106553e/65f40a4f0116312d1320e108_marker_okre.svg",c=[8.2961,59.91639];let s,i=null,r=null,d=[];function u(t){s=t,document.querySelectorAll(".tur-collection-item").forEach((t=>{const e=parseFloat(t.getAttribute("data-lat")),n=parseFloat(t.getAttribute("data-lng")),c=t.getAttribute("data-item-id"),u=t.getAttribute("data-kategori");if(!isNaN(e)&&!isNaN(n)){const f=function(t=a){const e=document.createElement("div");return e.className="custom-marker",e.style.backgroundImage=`url(${t})`,e.style.width="40px",e.style.height="50px",e.style.backgroundSize="cover",e}(a);f.setAttribute("data-category",u);const y=new o.default.Marker({element:f,anchor:"bottom"}).setLngLat([n,e]).addTo(s);d.push({marker:y,item:t,category:u,element:f,latitude:e,longitude:n}),t.addEventListener("click",(function(){!function(t,e,o,n){r&&(r.classList.remove("selected"),g(r,a));t.classList.add("selected"),r=t,g(t,l),s.flyTo({center:[e,o],zoom:16}),function(t){t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}(t);const c=document.querySelector(`.tur-collection-content[data-content-id="${n}"]`);d=c,d!==i?(i&&m(i),function(t){t.style.display="block",setTimeout((()=>{t.classList.add("expanded"),t.style.height="35vh"}),10)}(d),i=d):(m(d),i=null);var d}(this,n,e,c)})),y.getElement().addEventListener("click",(()=>{t.click()}))}})),document.querySelectorAll(".showmapbutton").forEach((t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-kategori"),e=this.getAttribute("data-mapstyle");e&&s.getStyle().styleURL!==e?(s.setStyle(e),s.on("style.load",(()=>{!function(t){d.forEach((({marker:e,category:n,element:a,latitude:l,longitude:c})=>{e.remove(),e=new o.default.Marker({element:a,anchor:"bottom"}).setLngLat([c,l]).addTo(s),a.style.visibility="all"===t||n===t?"visible":"hidden"})),f(t)}(t)}))):(function(t){document.querySelectorAll(".tur-collection-item").forEach((e=>{const o=e.getAttribute("data-kategori");e.style.display="all"===t||o===t?"":"none"}))}(t),f(t))}))}))}function m(t){t.classList.remove("expanded"),setTimeout((()=>{t.style.height="0",setTimeout((()=>t.style.display="none"),300)}),10)}function g(t,e){const o=d.find((e=>e.item===t));o&&(o.element.style.backgroundImage=`url(${e})`)}function f(t){const e=new o.default.LngLatBounds;d.forEach((({marker:o,category:n,latitude:a,longitude:l})=>{const c="all"===t||n===t;o.getElement().style.visibility=c?"visible":"hidden",c&&e.extend([l,a])})),e.isEmpty()||s.fitBounds(e,{padding:50,maxZoom:15,duration:5e3})}function y(){let t,e;const o=e=>{t=e.touches[0].clientY},n=o=>{if(!t)return;e=o.changedTouches[0].clientY;const n=e-t;Math.abs(n)>20&&(n>0?l(o.target):a(o.target),window.scrollTo(0,0),t=null)},a=t=>{const e=t.closest(".tur-collection-content");if(e){e.style.height="70vh",e.classList.add("expanded");const t=e.querySelector(".tur-tray-arrow");t&&(t.style.transform="rotateX(0deg)")}},l=t=>{const e=t.closest(".tur-collection-content");if(e){e.classList.remove("expanded"),e.style.height="20vh",setTimeout((()=>{e.classList.contains("expanded")||(e.style.display="none")}),300);const t=e.querySelector(".tur-tray-arrow");t&&(t.style.transform="rotateX(180deg)")}};var c,s;c=".tur-content-slide-cnt",s=t=>{t.addEventListener("touchstart",o),t.addEventListener("touchend",n)},document.querySelectorAll(c).forEach(s)}document.addEventListener("DOMContentLoaded",(()=>{mapboxgl.accessToken=n;u(function(){o.default.accessToken=n;const t=new o.default.Map({container:"turmap",style:"mapbox://styles/dbarnesen/ckk3vfvbi4t1v17p82fuy61pt",center:c,zoom:5.5,pitch:54});t.addControl(new o.default.NavigationControl,"top-right"),t.addControl(new o.default.ScaleControl({maxWidth:80,unit:"metric"}));const e=new o.default.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserLocation:!0,showUserHeading:!0});return t.on("load",(()=>t.addControl(e))),document.getElementById("geolocateButton").addEventListener("click",(()=>e.trigger())),t}()),y()}))}();
