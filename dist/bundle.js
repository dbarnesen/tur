!function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=t(mapboxgl);const n="pk.eyJ1IjoiZGJhcm5lc2VuIiwiYSI6IjFWeUJFNFUifQ.CF2Du3MPcaCQhBBNJSQMDQ",a="https://uploads-ssl.webflow.com/5a12777c9048ed000106553e/65f40a4f33d817767e6e242e_marker_blue.svg",c=[8.2961,59.91639];let l,s=null,r=null,i=[];function d(){i.forEach((e=>e.remove())),i=[],document.querySelectorAll(".tur-collection-item").forEach((e=>{const t=parseFloat(e.getAttribute("data-lat")),n=parseFloat(e.getAttribute("data-lng")),c=e.getAttribute("data-item-id"),d=e.getAttribute("data-kategori");if(!isNaN(t)&&!isNaN(n)){const f=function(e=a){const t=document.createElement("div");return t.className="custom-marker",t.style.backgroundImage=`url(${e})`,t.style.width="40px",t.style.height="50px",t.style.backgroundSize="cover",t}(a),g=new o.default.Marker({element:f,anchor:"bottom"}).setLngLat([n,t]).addTo(l);i.push({marker:g,item:e,category:d,element:f}),console.log(`Adding marker at [${n}, ${t}] with category ${d}`),e.onclick=()=>{var o;r&&(r.classList.remove("selected"),m(r,a)),e.classList.add("selected"),r=e,m(e,"https://uploads-ssl.webflow.com/5a12777c9048ed000106553e/65f40a4f0116312d1320e108_marker_okre.svg"),l.flyTo({center:[n,t],zoom:16,duration:1e3}),function(e){e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}(e),(o=document.querySelector(`.tur-collection-content[data-content-id="${c}"]`))!==s?(s&&u(s),function(e){e.style.display="block",setTimeout((()=>{e.classList.add("expanded"),e.style.height="30vh"}),10)}(o),s=o):(u(o),s=null)},g.getElement().onclick=()=>{e.click()}}}))}function u(e){e.classList.remove("expanded"),setTimeout((()=>{e.style.height="0",setTimeout((()=>e.style.display="none"),300)}),10)}function m(e,t){const o=i.find((t=>t.item===e));o&&(o.element.style.backgroundImage=`url(${t})`)}function f(){let e,t;const o=t=>{e=t.touches[0].clientY},n=o=>{if(!e)return;t=o.changedTouches[0].clientY;const n=t-e;Math.abs(n)>20&&(n>0?c(o.target):a(o.target),window.scrollTo(0,0),e=null)},a=e=>{const t=e.closest(".tur-collection-content");if(t){t.style.height="70vh",t.classList.add("expanded");const e=t.querySelector(".tur-tray-arrow");e&&(e.style.transform="rotateX(0deg)")}},c=e=>{const t=e.closest(".tur-collection-content");if(t){t.classList.remove("expanded"),t.style.height="20vh",setTimeout((()=>{t.classList.contains("expanded")||(t.style.display="none")}),300);const e=t.querySelector(".tur-tray-arrow");e&&(e.style.transform="rotateX(180deg)")}};var l,s;l=".tur-content-slide-cnt",s=e=>{e.addEventListener("touchstart",o),e.addEventListener("touchend",n)},document.querySelectorAll(l).forEach(s)}document.addEventListener("DOMContentLoaded",(()=>{mapboxgl.accessToken=n,function(){o.default.accessToken=n;const e=new o.default.Map({container:"turmap",style:"mapbox://styles/dbarnesen/ckk3vfvbi4t1v17p82fuy61pt",center:c,zoom:5.5,pitch:54});e.addControl(new o.default.NavigationControl,"top-right"),e.addControl(new o.default.ScaleControl({maxWidth:80,unit:"metric"}));const t=new o.default.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserLocation:!0,showUserHeading:!0});e.on("load",(()=>e.addControl(t))),document.getElementById("geolocateButton").addEventListener("click",(()=>t.trigger()))}(),d(),f()}))}();
