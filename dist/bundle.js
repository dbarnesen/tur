!function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(mapboxgl);const o="pk.eyJ1IjoiZGJhcm5lc2VuIiwiYSI6IjFWeUJFNFUifQ.CF2Du3MPcaCQhBBNJSQMDQ",c="https://uploads-ssl.webflow.com/5a12777c9048ed000106553e/65f40a4f33d817767e6e242e_marker_blue.svg",l="https://uploads-ssl.webflow.com/5a12777c9048ed000106553e/65f40a4f0116312d1320e108_marker_okre.svg",a=[8.2961,59.91639];let r=null,s=[];function i(){s.forEach((t=>t.remove())),s=[],document.querySelectorAll(".tur-collection-item").forEach((t=>{const e=parseFloat(t.getAttribute("data-lat")),o=parseFloat(t.getAttribute("data-lng")),a=t.getAttribute("data-kategori");if(!isNaN(e)&&!isNaN(o)){const i=function(t=c){const e=document.createElement("div");return e.className="custom-marker",e.style.backgroundImage=`url(${t})`,e.style.width="40px",e.style.height="50px",e.style.backgroundSize="cover",e}(c),d=new n.default.Marker({element:i,anchor:"bottom"}).setLngLat([o,e]).addTo(r);s.push({marker:d,item:t,category:a}),t.addEventListener("click",(function(){var n;currentlySelectedItem&&(currentlySelectedItem.classList.remove("selected"),m(currentlySelectedItem,c)),this.classList.add("selected"),currentlySelectedItem=this,m(this,l),r.flyTo({center:[o,e],zoom:16,duration:2e3}),function(t){t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}(t),(n=document.querySelector(`.tur-collection-content[data-content-id="${itemId}"]`))!==currentlyOpenContent?(currentlyOpenContent&&u(currentlyOpenContent),function(t){t.style.display="block",setTimeout((()=>{t.classList.add("expanded"),t.style.height="30vh"}),10)}(n),currentlyOpenContent=n):(u(n),currentlyOpenContent=null)})),d.getElement().addEventListener("click",(function(){t.click()}))}}))}function d(t){document.querySelectorAll(".tur-collection-item").forEach((e=>{e.style.display=e.getAttribute("data-kategori")===t?"block":"none"})),s.forEach((({marker:e,category:n})=>{const o=n===t;e.getElement().style.display=o?"block":"none"}))}function u(t){t.classList.remove("expanded"),setTimeout((()=>{t.style.height="0",setTimeout((()=>t.style.display="none"),300)}),10)}function m(t,e){const n=s.find((e=>e.item===t));n&&(n.element.style.backgroundImage=`url(${e})`)}document.querySelectorAll(".showmapbutton").forEach((t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-kategori");!function(t,e){r?r.getStyle().styleURL!==t?r.setStyle(t).on("style.load",(function(){i(),d(e)})):d(e):(n.default.accessToken=o,r=new n.default.Map({container:"turmap",style:t,center:a,zoom:5.5}),r.on("load",(function(){i(),d(e)})))}(this.getAttribute("data-mapstyle")||"default_style",t)}))}));function y(){let t,e;const n=e=>{t=e.touches[0].clientY},o=n=>{if(!t)return;e=n.changedTouches[0].clientY;const o=e-t;Math.abs(o)>20&&(o>0?l(n.target):c(n.target),window.scrollTo(0,0),t=null)},c=t=>{const e=t.closest(".tur-collection-content");if(e){e.style.height="70vh",e.classList.add("expanded");const t=e.querySelector(".tur-tray-arrow");t&&(t.style.transform="rotateX(0deg)")}},l=t=>{const e=t.closest(".tur-collection-content");if(e){e.classList.remove("expanded"),e.style.height="20vh",setTimeout((()=>{e.classList.contains("expanded")||(e.style.display="none")}),300);const t=e.querySelector(".tur-tray-arrow");t&&(t.style.transform="rotateX(180deg)")}};var a,r;a=".tur-content-slide-cnt",r=t=>{t.addEventListener("touchstart",n),t.addEventListener("touchend",o)},document.querySelectorAll(a).forEach(r)}document.addEventListener("DOMContentLoaded",(()=>{mapboxgl.accessToken=o,function(){n.default.accessToken=o;const t=new n.default.Map({container:"turmap",style:"mapbox://styles/dbarnesen/ckk3vfvbi4t1v17p82fuy61pt",center:a,zoom:5.5,pitch:54});t.addControl(new n.default.NavigationControl,"top-right"),t.addControl(new n.default.ScaleControl({maxWidth:80,unit:"metric"}));const e=new n.default.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserLocation:!0,showUserHeading:!0});t.on("load",(()=>t.addControl(e))),document.getElementById("geolocateButton").addEventListener("click",(()=>e.trigger()))}(),i(),y()}))}();
