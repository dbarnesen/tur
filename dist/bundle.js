!function(t,e,n){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=o(t);const i="pk.eyJ1IjoiZGJhcm5lc2VuIiwiYSI6IjFWeUJFNFUifQ.CF2Du3MPcaCQhBBNJSQMDQ",l=[8.2961,59.91639],c={Trehus:"mapbox://styles/dbarnesen/ckk3vfvbi4t1v17p82fuy61pt",Urheia:"mapbox://styles/dbarnesen/ckk3vfvbi4t1v17p82fuy61pt",Barna:"mapbox://styles/dbarnesen/clu1rd21q002x01pi0udm9dds",default:"mapbox://styles/dbarnesen/cltqf5kh9001w01qu48sn3oti"};let s;let r,d=null,u=null,m=[];function g(t){r=t,document.querySelectorAll(".tur-collection-item").forEach((t=>{const e=parseFloat(t.getAttribute("data-lat")),n=parseFloat(t.getAttribute("data-lng")),o=t.getAttribute("data-item-id"),i=t.getAttribute("data-kategori");if(!isNaN(e)&&!isNaN(n)){const l=function(t="location_on"){const e=document.createElement("span");return e.className="unSelected",e.innerHTML=t,e}("location_on"),c=new a.default.Marker({element:l,anchor:"bottom"}).setLngLat([n,e]).addTo(r);m.push({marker:c,item:t,category:i,element:l,latitude:e,longitude:n}),t.addEventListener("click",(function(){if(u){u.classList.remove("selected");m.find((t=>t.item===u)).element.classList.remove("selectedMarker")}this.classList.add("selected"),u=this;var t;m.find((t=>t.item===this)).element.classList.add("selectedMarker"),r.flyTo({center:[n,e],zoom:16,duration:2e3}),function(t){t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}(this),(t=document.querySelector(`.tur-collection-content[data-content-id="${o}"]`))!==d?(d&&f(d),function(t){t.style.display="block",setTimeout((()=>{t.classList.add("expanded"),t.style.height="30vh"}),10)}(t),d=t):(f(t),d=null)})),c.getElement().addEventListener("click",(()=>{t.click()}))}})),document.querySelectorAll(".showmapbutton").forEach((t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-kategori");!function(t){s&&t&&s.setStyle(t)}(c[t]||c.default),function(t){document.querySelectorAll(".tur-collection-item").forEach((e=>{const n=e.getAttribute("data-kategori");e.style.display="all"===t||n===t?"":"none"}))}(t),function(t,e,n){const o=new mapboxgl.LngLatBounds;e.forEach((({marker:e,category:a,latitude:i,longitude:l})=>{const c="all"===n||a===n;e.getElement().style.visibility=c?"visible":"hidden",c?(e.addTo(t),o.extend(e.getLngLat())):e.remove()})),o.isEmpty()||t.fitBounds(o,{padding:50,maxZoom:15,pitch:54,duration:6e3})}(r,m,t)}))}))}function f(t){t.classList.remove("expanded"),setTimeout((()=>{t.style.height="0",setTimeout((()=>t.style.display="none"),300)}),10)}e.gsap.registerPlugin(n.Draggable),document.addEventListener("DOMContentLoaded",(()=>{mapboxgl.accessToken=i;g(function(){a.default.accessToken=i,s=new a.default.Map({container:"turmap",style:"mapbox://styles/dbarnesen/ckk3vfvbi4t1v17p82fuy61pt",center:l,zoom:5.5,pitch:54}),s.addControl(new a.default.NavigationControl,"top-right"),s.addControl(new a.default.ScaleControl({maxWidth:80,unit:"metric"}));const t=new a.default.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserLocation:!0,showUserHeading:!0});return s.on("load",(()=>s.addControl(t))),document.getElementById("geolocateButton").addEventListener("click",(()=>t.trigger())),s}()),function(){const t=document.getElementById("tur-collection-content");if(t){const o=window.innerHeight,a=.5*o,i=.85*o;n.Draggable.create(t,{type:"y",bounds:window,onDragEnd:function(){Math.abs(this.y)>a?e.gsap.to(t,{y:this.y<0?-i:i,duration:.5}):e.gsap.to(t,{y:0,duration:.5})}})}}()}))}(mapboxgl,gsap,Draggable);
